<!DOCTYPE html>
<html lang="zh" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.74.3" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>构建你的“牌” :: 中文</title>

    
    <link href="/css/nucleus.css?1595842180" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1595842180" rel="stylesheet">
    <link href="/css/hybrid.css?1595842180" rel="stylesheet">
    <link href="/css/featherlight.min.css?1595842180" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1595842180" rel="stylesheet">
    <link href="/css/auto-complete.css?1595842180" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1595842180" rel="stylesheet">
    <link href="/css/theme.css?1595842180" rel="stylesheet">
    <link href="/css/hugo-theme.css?1595842180" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1595842180"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/zh/getting-started/build-your-own-tile/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/gopher.png" style="max-height: 40px;" />
<span>AWS Solutions Assembler</span>


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1595842180"></script>
<script type="text/javascript" src="/js/auto-complete.js?1595842180"></script>
<script type="text/javascript">
    
        var baseurl = "\/zh";
    
</script>
<script type="text/javascript" src="/js/search.js?1595842180"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/zh/getting-started/" title="入门" class="dd-item 
        parent
        
        
        ">
      <a href="/zh/getting-started/">
          入门
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/zh/getting-started/installation/" title="环境安装" class="dd-item ">
        <a href="/zh/getting-started/installation/">
        环境安装
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/zh/getting-started/simple-usage/" title="简单用例" class="dd-item ">
        <a href="/zh/getting-started/simple-usage/">
        简单用例
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/zh/getting-started/build-your-own-tile/" title="构建你的“牌”" class="dd-item active">
        <a href="/zh/getting-started/build-your-own-tile/">
        构建你的“牌”
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/zh/getting-started/usage-of-hu/" title="构建你的“胡”" class="dd-item ">
        <a href="/zh/getting-started/usage-of-hu/">
        构建你的“胡”
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/zh/design-principles/" title="设计原则" class="dd-item 
        
        
        
        ">
      <a href="/zh/design-principles/">
          设计原则
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/zh/examples/" title="示例" class="dd-item 
        
        
        
        ">
      <a href="/zh/examples/">
          示例
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/zh/examples/simple-eks-cluster/readme/" title="EKS简易集群" class="dd-item ">
        <a href="/zh/examples/simple-eks-cluster/readme/">
        EKS简易集群
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/zh/examples/nginx-on-eks/readme/" title="EKS集群上部署Nginx" class="dd-item ">
        <a href="/zh/examples/nginx-on-eks/readme/">
        EKS集群上部署Nginx
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/zh/examples/eks-from-scratch/readme/" title="从零构建EKS集群" class="dd-item ">
        <a href="/zh/examples/eks-from-scratch/readme/">
        从零构建EKS集群
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/zh/examples/eks-from-scratch/tiles/myeks/0.1.0/readme/" title="" class="dd-item ">
        <a href="/zh/examples/eks-from-scratch/tiles/myeks/0.1.0/readme/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/zh/spec/" title="配置规范" class="dd-item 
        
        
        
        ">
      <a href="/zh/spec/">
          配置规范
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/en/getting-started/build-your-own-tile/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="zh" value="/zh/getting-started/build-your-own-tile/" selected>中文</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/zh/'>文档中心</a> > <a href='/zh/getting-started/'>入门</a> > 构建你的“牌”
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#构建自己的微服务块">构建自己的微服务块</a>
      <ul>
        <li><a href="#构思牌的架构">构思牌的架构</a></li>
        <li><a href="#创建一个nginx的牌文件夹">创建一个Nginx的“牌”文件夹</a></li>
        <li><a href="#创建牌定义文件">创建牌定义文件</a></li>
        <li><a href="#创建应用部署文件">创建应用部署文件</a></li>
        <li><a href="#检查您的牌定义结构">检查您的牌定义结构</a></li>
        <li><a href="#完成牌的开发">完成牌的开发</a></li>
      </ul>
    </li>
    <li><a href="#使用您自定义的牌">使用您自定义的牌</a>
      <ul>
        <li><a href="#编写麻将部署yaml文件">编写麻将部署yaml文件</a></li>
        <li><a href="#执行麻将部署yaml文件">执行麻将部署yaml文件</a></li>
        <li><a href="#检查你的niginx部署结果">检查你的Niginx部署结果</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              构建你的“牌”
            </h1>
          

        


<p>在使用微服务块“牌”的环节或许您已经发现，我们通过两个操作（定义部署和执行部署）就交付了AWS的VPC，IAM，EKS等多个资源环境，并且他们享有最佳实践。而我们通过10个左右的步骤完成EKS上2048游戏的部署。</p>
<p>如果我们将2048这样的应用考虑为不同于EKS的另外一个“牌”进行定义.通常这也仅需要几个简单的步骤即可完成。届时我们的团队，包括麻将的生态均可复用您的牌。</p>
<p>现在，我们构建自己的牌，在入门示例中我们的牌将在EKS上运行NGINX</p>
<h2 id="构建自己的微服务块">构建自己的微服务块</h2>
<h3 id="构思牌的架构">构思牌的架构</h3>
<p>通常，您可以需要构思您的牌属于哪种负载，他在您微服务架构中的作用是什么。
作为麻将的最基本单元，Tile的构建有两种方法。一种方法基于CDK，它是<a href="https://docs.aws.amazon.com/cdk/latest/guide/constructs.html">CDK Construct</a>和Tile规范的组合。另一种方法是使用各种工件和Tile规范进行构建，这将让您操纵绝大多数资源。
牌通常由以下组件构成：</p>
<ul>
<li>AWS CDK</li>
<li>CMD 命令</li>
<li>K8S Deployment</li>
<li>K8S Heml</li>
<li>K8S Kustomize
您可能是调用已有的，或是您原创的yaml文件按照麻将框架定义的文件夹结构进行牌的定义</li>
</ul>
<p>一个好的牌关键因素在于</p>
<ul>
<li>考虑处理重复部署</li>
<li>考虑可以同时部署多个Tile</li>
<li>管理各种潜在的错误</li>
</ul>
<p>以下是NGINX示例下的架构图：</p>
<p><img src="/nginx-on-eks.svg" alt="nginx-on-eks"></p>
<h3 id="创建一个nginx的牌文件夹">创建一个Nginx的“牌”文件夹</h3>
<p>创建一个本地文件夹作为Tile Repo，以便您可以立即开发和测试Tile。如果无法从此本地存储库加载Tile，Dice将尝试从公共Tile存储库加载Tile。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ cd $HOME/ws/local-tiles-repo
$ mkdir nginx/0.0.1
</code></pre></div><h3 id="创建牌定义文件">创建牌定义文件</h3>
<p>创建以下文件<code>nginx/0.0.1/tile-spec.yaml</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">    <span style="color:#75715e"># API version</span>
    <span style="color:#66d9ef">apiVersion</span>: mahjong.io/v1alpha1
    <span style="color:#75715e"># Kind of entity</span>
    <span style="color:#66d9ef">kind</span>: Tile
    <span style="color:#75715e"># Metadata</span>
    <span style="color:#66d9ef">metadata</span>:
        <span style="color:#75715e"># Name of entity</span>
        <span style="color:#66d9ef">name</span>: nginx
        <span style="color:#75715e"># Category of entity</span>
        <span style="color:#66d9ef">category</span>: ContainerApplication
        <span style="color:#75715e"># Version of entity</span>
        <span style="color:#66d9ef">version</span>: <span style="color:#ae81ff">0.0.1</span>
    <span style="color:#75715e"># Specification</span>
    <span style="color:#66d9ef">spec</span>:
      <span style="color:#75715e"># Dependencies represent dependency with other Tile</span>
      <span style="color:#66d9ef">dependencies</span>:
        - <span style="color:#66d9ef">name</span>: eks
          <span style="color:#75715e"># Tile name</span>
          <span style="color:#66d9ef">tileReference</span>: Eks0
          <span style="color:#75715e"># Tile version</span>
          <span style="color:#66d9ef">tileVersion</span>: <span style="color:#ae81ff">0.0.5</span>

      <span style="color:#66d9ef">inputs</span>:
        - <span style="color:#66d9ef">name</span>: clusterName
          <span style="color:#66d9ef">inputType</span>: String
          <span style="color:#66d9ef">require</span>: <span style="color:#66d9ef">true</span>
          <span style="color:#66d9ef">override</span>:
            <span style="color:#66d9ef">name</span>: eks
            <span style="color:#66d9ef">field</span>: clusterName
        - <span style="color:#66d9ef">name</span>: capacity
          <span style="color:#66d9ef">inputType</span>: Number
          <span style="color:#66d9ef">require</span>: <span style="color:#66d9ef">false</span>
          <span style="color:#66d9ef">override</span>:
            <span style="color:#66d9ef">name</span>: eks
            <span style="color:#66d9ef">field</span>: capacity
          <span style="color:#66d9ef">defaultValue</span>: <span style="color:#ae81ff">2</span>
        - <span style="color:#66d9ef">name</span>: capacityInstance
          <span style="color:#66d9ef">inputType</span>: String
          <span style="color:#66d9ef">require</span>: <span style="color:#66d9ef">false</span>
          <span style="color:#66d9ef">override</span>:
            <span style="color:#66d9ef">name</span>: eks
            <span style="color:#66d9ef">field</span>: capacityInstance
          <span style="color:#66d9ef">defaultValue</span>: c5.xlarge
        - <span style="color:#66d9ef">name</span>: version
          <span style="color:#66d9ef">inputType</span>: String
          <span style="color:#66d9ef">require</span>: <span style="color:#66d9ef">false</span>
          <span style="color:#66d9ef">override</span>:
            <span style="color:#66d9ef">name</span>: eks
            <span style="color:#66d9ef">field</span>: version
          <span style="color:#66d9ef">defaultValue</span>: <span style="color:#ae81ff">1.15</span>

      <span style="color:#75715e">#aws eks --region &lt;region&gt; update-kubeconfig --name &lt;cluster&gt; --role-arn &lt;master role arn&gt; --kubeconfig &lt;config&gt;</span>
      <span style="color:#66d9ef">manifests</span>:
        <span style="color:#75715e"># Type of manifest</span>
        <span style="color:#66d9ef">manifestType</span>: K8s
        <span style="color:#66d9ef">namespace</span>: default
        <span style="color:#75715e"># manifest list</span>
        <span style="color:#66d9ef">files</span>:
          - nginx-on-k8s.yml

      <span style="color:#75715e"># Ouptputs represnt output value after launched, for &#39;ContainerApplication&#39; might need leverage specific command to retrive output.</span>
      <span style="color:#66d9ef">outputs</span>:
        <span style="color:#75715e"># String</span>
        - <span style="color:#66d9ef">name</span>: nginxEndpoint
          <span style="color:#66d9ef">outputType</span>: String
          <span style="color:#66d9ef">defaultValueCommand</span>: kubectl get svc nginx-service -o jsonpath=<span style="color:#e6db74">&#39;{.status..hostname}&#39;</span>
          <span style="color:#66d9ef">description</span>: Custom::String

      <span style="color:#66d9ef">notes</span>: []
</code></pre></div><h3 id="创建应用部署文件">创建应用部署文件</h3>
<p>编写k8s的Nginx部署文件<code>nginx/0.0.1/lib/nginx-on-k8s.yml</code>他已经在牌yaml文件中被定义，麻将在部署过程中自动生成命令脚本，运行这个Nginx部署脚本</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">    <span style="color:#66d9ef">apiVersion</span>: apps/v1 <span style="color:#75715e"># for versions before 1.9.0 use apps/v1beta2</span>
    <span style="color:#66d9ef">kind</span>: Deployment
    <span style="color:#66d9ef">metadata</span>:
      <span style="color:#66d9ef">name</span>: mahjong-nginx-deployment
    <span style="color:#66d9ef">spec</span>:
      <span style="color:#66d9ef">selector</span>:
        <span style="color:#66d9ef">matchLabels</span>:
          <span style="color:#66d9ef">app</span>: nginx
      <span style="color:#66d9ef">replicas</span>: <span style="color:#ae81ff">2</span> <span style="color:#75715e"># tells deployment to run 2 pods matching the template</span>
      <span style="color:#66d9ef">template</span>:
        <span style="color:#66d9ef">metadata</span>:
          <span style="color:#66d9ef">labels</span>:
            <span style="color:#66d9ef">app</span>: nginx
        <span style="color:#66d9ef">spec</span>:
          <span style="color:#66d9ef">containers</span>:
          - <span style="color:#66d9ef">name</span>: nginx
            <span style="color:#66d9ef">image</span>: nginx:<span style="color:#ae81ff">1.14.2</span>
            <span style="color:#66d9ef">ports</span>:
            - <span style="color:#66d9ef">containerPort</span>: <span style="color:#ae81ff">80</span>
    --<span style="color:#e6db74">-
</span><span style="color:#e6db74">    apiVersion: v1</span>
    <span style="color:#66d9ef">kind</span>: Service
    <span style="color:#66d9ef">metadata</span>:
      <span style="color:#66d9ef">name</span>: nginx-service
    <span style="color:#66d9ef">spec</span>:
      <span style="color:#66d9ef">selector</span>:
        <span style="color:#66d9ef">app</span>: nginx
      <span style="color:#66d9ef">ports</span>:
        - <span style="color:#66d9ef">port</span>: <span style="color:#ae81ff">80</span>
          <span style="color:#66d9ef">targetPort</span>: <span style="color:#ae81ff">80</span>
      <span style="color:#66d9ef">type</span>: LoadBalancer
</code></pre></div><h3 id="检查您的牌定义结构">检查您的牌定义结构</h3>
<p>麻将为牌定义了规范的框架，以下是牌规范的定义</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Make foder as your local Tiles repo, see following example folders.</span>
#
<span style="color:#75715e"># + local-tiles-repo</span>
<span style="color:#75715e">#    |</span>
<span style="color:#75715e">#    +- &lt;tile name (lower case)&gt;</span>
<span style="color:#75715e">#        |</span>
<span style="color:#75715e">#        +- &lt;version of tile (eg: 0.1.0)&gt;</span>
<span style="color:#75715e">#            |</span>
<span style="color:#75715e">#            +- &lt;all content here&gt;</span>
</code></pre></div><p>映射上面的规范定义，您需要按照框架的规范放置您的文件，按照我们的操作步骤，现在您的工作目录应符合麻将的规范，目录结构如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nginx
└── 0.0.1
    ├── lib
    │   └── nginx-on-k8s.yml
    └── tile-spec.yaml
</code></pre></div><h3 id="完成牌的开发">完成牌的开发</h3>
<p>以上，您已经完成了一张您自己的牌的开发，牌可以被复用，可以被您定义为您的最佳实践环节。也可以依赖于其他的牌，组成一个功能更丰富的牌（例如这个nginx的牌，他依赖于已有的VPC和EKS牌），麻将的调度层将自动为您调用依赖的牌，并生成CMD命令完成构建，您在牌开发的过程中往往只需要关心您在什么牌之上构建一个什么模块&hellip;</p>
<h2 id="使用您自定义的牌">使用您自定义的牌</h2>
<h3 id="编写麻将部署yaml文件">编写麻将部署yaml文件</h3>
<p>和使用已有的牌一样，我们进行定义部署和执行部署两个动作。现在我们创建一个YAML配置文件并将其命名为<code>nginx-on-eks.yaml</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">    <span style="color:#66d9ef">apiVersion</span>: mahjong.io/v1alpha1
    <span style="color:#66d9ef">kind</span>: Deployment
    <span style="color:#66d9ef">metadata</span>:
      <span style="color:#66d9ef">name</span>: nginx
      <span style="color:#66d9ef">version</span>: <span style="color:#ae81ff">0.1.0</span>
    <span style="color:#66d9ef">spec</span>:
      <span style="color:#66d9ef">template</span>:
        <span style="color:#66d9ef">tiles</span>:
          <span style="color:#66d9ef">tileNginx</span>:
            <span style="color:#66d9ef">tileReference</span>: nginx
            <span style="color:#66d9ef">tileVersion</span>: <span style="color:#ae81ff">0.0.1</span>
            <span style="color:#66d9ef">inputs</span>:
              - <span style="color:#66d9ef">name</span>: clusterName
                <span style="color:#66d9ef">inputValue</span>: nginx-on-eks
              - <span style="color:#66d9ef">name</span>: capacity
                <span style="color:#66d9ef">inputValue</span>: <span style="color:#ae81ff">3</span>
              - <span style="color:#66d9ef">name</span>: capacityInstance
                <span style="color:#66d9ef">inputValue</span>: m5.large
              - <span style="color:#66d9ef">name</span>: version
                <span style="color:#66d9ef">inputValue</span>: <span style="color:#ae81ff">1.16</span>

      <span style="color:#66d9ef">summary</span>:
        <span style="color:#66d9ef">description</span>:
        <span style="color:#66d9ef">outputs</span>:
          - <span style="color:#66d9ef">name</span>: Nginx Endpoint
            <span style="color:#66d9ef">value</span>: $(tileNginx.outputs.nginxEndpoint)

        <span style="color:#66d9ef">notes</span>: []
</code></pre></div><h3 id="执行麻将部署yaml文件">执行麻将部署yaml文件</h3>
<p>部署到AWS<code>mctl deploy -f ./nginx-on-eks.yaml</code>。如果一切顺利你讲会的得到一下结果:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ mctl deploy -f ./nginx-on-eks.yaml

...

<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + export KUBECONFIG<span style="color:#f92672">=</span>/workspace/nginx/lib/nginx/kube.config
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + KUBECONFIG<span style="color:#f92672">=</span>/workspace/nginx/lib/nginx/kube.config
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + export WORK_HOME<span style="color:#f92672">=</span>/workspace/nginx
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + WORK_HOME<span style="color:#f92672">=</span>/workspace/nginx
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + export TILE_HOME<span style="color:#f92672">=</span>/workspace/nginx/lib/nginx
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + TILE_HOME<span style="color:#f92672">=</span>/workspace/nginx/lib/nginx
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + export NAMESPACE<span style="color:#f92672">=</span>default
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + NAMESPACE<span style="color:#f92672">=</span>default
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + cd /workspace/nginx
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + kubectl apply -f /workspace/nginx/lib/nginx/lib/nginx-on-k8s.yml -n default
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  deployment.apps/mahjong-nginx-deployment unchanged
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  service/nginx-service unchanged
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + sleep <span style="color:#ae81ff">10</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  ++ kubectl get svc nginx-service -o <span style="color:#e6db74">&#39;jsonpath={.status..hostname}&#39;</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  + echo <span style="color:#e6db74">&#39;{&#34;nginxEndpoint=a3d984b0d065e46feafcc5d9b944b0e7-1722932499.us-east-2.elb.amazonaws.com&#34;}&#39;</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  Extract outputs: <span style="color:#f92672">[</span>nginxEndpoint<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">[</span>a3d984b0d065e46feafcc5d9b944b0e7-1722932499.us-east-2.elb.amazonaws.com<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>  Nginx Endpoint <span style="color:#f92672">=</span> a3d984b0d065e46feafcc5d9b944b0e7-1722932499.us-east-2.elb.amazonaws.com
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ℹ<span style="color:#f92672">]</span>
</code></pre></div><h3 id="检查你的niginx部署结果">检查你的Niginx部署结果</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ curl a3d984b0d065e46feafcc5d9b944b0e7-1722932499.us-east-2.elb.amazonaws.com
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body <span style="color:#f92672">{</span>
        width: 35em;
        margin: <span style="color:#ae81ff">0</span> auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    <span style="color:#f92672">}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you <span style="color:#66d9ef">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>

<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/zh/getting-started/simple-usage/" title="简单用例"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/zh/getting-started/usage-of-hu/" title="构建你的“胡”" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1595842180"></script>
    <script src="/js/perfect-scrollbar.min.js?1595842180"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1595842180"></script>
    <script src="/js/jquery.sticky.js?1595842180"></script>
    <script src="/js/featherlight.min.js?1595842180"></script>
    <script src="/js/highlight.pack.js?1595842180"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1595842180"></script>
    <script src="/js/learn.js?1595842180"></script>
    <script src="/js/hugo-learn.js?1595842180"></script>

    <link href="/mermaid/mermaid.css?1595842180" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1595842180"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

